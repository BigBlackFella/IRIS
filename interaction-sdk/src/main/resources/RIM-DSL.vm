events
	GET GET
end

commands
#foreach ( $command in $commands.getCommands() )
	$command.getId()
#end
#foreach ( $rsm in $rim.getResourceStateMachines() )
#foreach ( $transition in $rsm.getTransitions() )
	GETNavProperty${transition.getTargetStateName()} entity=${rsm.getEntityName()}, navproperty=nav${transition.getTargetStateName()}
#end
#end
end

initial resource ServiceDocument
	collection ServiceDocument
	view { GETServiceDocument }
	path "/"
	GET -> metadata
#foreach ( $rsm in $rim.getResourceStateMachines() )
	GET -> ${rsm.getCollectionStateName()}
#end
end

resource metadata
	item Metadata
	view { GETMetadata }
	path "/$metadata"
end

#foreach ( $rsm in $rim.getResourceStateMachines() )
#* Collection resource state*#
resource ${rsm.getCollectionStateName()}
	collection ${rsm.getEntityName()}
	view { GETEntities }
	path "/${rsm.getEntityName()}"
	GET *-> ${rsm.getEntityStateName()} id=${rsm.getMappedEntityProperty()}
#foreach ( $transition in $rsm.getTransitions() )
	GET *-> ${transition.getTargetStateName()} id=${rsm.getMappedEntityProperty()}
#end
end

#* Entity resource state*#
resource ${rsm.getEntityStateName()}
	item ${rsm.getEntityName()}
	view { GETEntity }
	path "/${rsm.getEntityName()}(${rsm.getPathParametersTemplate()})"
#foreach ( $transition in $rsm.getTransitions() )
	GET -> ${transition.getTargetStateName()} id=${rsm.getMappedEntityProperty()}, nav${transition.getTargetStateName()}="${transition.getTargetStateName()}"
#end
end

#* Transition to other resource states *#
#foreach ( $transition in $rsm.getTransitions() )

resource ${transition.getTargetStateName()}#*
*##if ($transition.isCollectionState())#* 
	Transition to collection resource state in target RSM *#
	collection ${transition.getTargetEntityName()}
	view { GETNavProperty${transition.getTargetStateName()} }
	path "/${rsm.getEntityName()}(${rsm.getPathParametersTemplate()})/{nav${transition.getTargetStateName()}}"
	GET -> ${transition.getTargetResourceStateMachine().getCollectionStateName()} id=${transition.getTargetResourceStateMachine().getMappedEntityProperty()}
#else#*
	Transition to entity resource state in target RSM *#
	item ${transition.getTargetEntityName()}
	view { GETNavProperty${transition.getTargetStateName()} }
	path "/${rsm.getEntityName()}(${rsm.getPathParametersTemplate()})/{nav${transition.getTargetStateName()}}"
	GET -> ${transition.getTargetRsmStateName()} id=${transition.getTargetResourceStateMachine().getMappedEntityProperty()}
#end
end
#end
#end
