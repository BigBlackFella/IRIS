events
	GET GET
	POST POST
	PUT PUT
	DELETE DELETE
end

commands
	GETServiceDocument
	GETEntities
	GETEntity
	CreateEntity
	GETNavProperty
end

initial resource ServiceDocument
	item ServiceDocument
	view { GETServiceDocument }
	path "/"
	GET -> Flights
	GET -> Airports
	GET -> FlightSchedules
	GET -> Passengers
end


resource Flights
	collection Flight
	view { GETEntities }
	path "/Flights()"
	POST -> flight_pseudo_created
	GET *-> flight id=flightID
	GET title="flightschedule" *-> flightschedule id=flightScheduleNum
end

resource flight
	item Flight
	view { GETEntity }
	path "/Flights({id})"
	GET title="flightschedule" -> flightschedule id=flightScheduleNum
end


resource flight_pseudo_created
	item Flight
	view { GETEntity }
	actions { CreateEntity }
	path "/Flights()"
end

resource Airports
	collection Airport
	view { GETEntities }
	path "/Airports()"
	POST -> airport_pseudo_created
	GET *-> airport id=code
	GET title="departures" *-> airport_departures id=code, filter="departureAirportCode eq '{code}'"
	GET title="arrivals" *-> airport_arrivals id=code, filter="arrivalAirportCode eq '{code}'"
end

resource airport
	item Airport
	view { GETEntity }
	path "/Airports('{id}')"
	GET title="departures" -> airport_departures id=code, filter="departureAirportCode eq '{code}'"
	GET title="arrivals" -> airport_arrivals id=code, filter="arrivalAirportCode eq '{code}'"
end


resource airport_departures
	collection FlightSchedule
	view { GETEntities filter=filter }
	path "/Airports('{id}')/departures"
	POST -> flightschedule_pseudo_created
	GET *-> flightschedule id=flightScheduleID
	GET title="departureAirport" *-> airport id=departureAirportCode
	GET title="arrivalAirport" *-> airport id=arrivalAirportCode
end

resource airport_arrivals
	collection FlightSchedule
	view { GETEntities filter=filter }
	path "/Airports('{id}')/arrivals"
	POST -> flightschedule_pseudo_created
	GET *-> flightschedule id=flightScheduleID
	GET title="departureAirport" *-> airport id=departureAirportCode
	GET title="arrivalAirport" *-> airport id=arrivalAirportCode
end

resource airport_pseudo_created
	item Airport
	view { GETEntity }
	actions { CreateEntity }
	path "/Airports()"
end

resource FlightSchedules
	collection FlightSchedule
	view { GETEntities }
	path "/FlightSchedules()"
	POST -> flightschedule_pseudo_created
	GET *-> flightschedule id=flightScheduleID
	GET title="departureAirport" *-> airport id=departureAirportCode
	GET title="arrivalAirport" *-> airport id=arrivalAirportCode
end

resource flightschedule
	item FlightSchedule
	view { GETEntity }
	path "/FlightSchedules({id})"
	GET title="departureAirport" -> airport id=departureAirportCode
	GET title="arrivalAirport" -> airport id=arrivalAirportCode
end


resource flightschedule_pseudo_created
	item FlightSchedule
	view { GETEntity }
	actions { CreateEntity }
	path "/FlightSchedules()"
end

resource Passengers
	collection Passenger
	view { GETEntities }
	path "/Passengers()"
	POST -> passenger_pseudo_created
	GET *-> passenger id=passengerNo
	GET title="flight" *-> flight id=flightID
end

resource passenger
	item Passenger
	view { GETEntity }
	path "/Passengers({id})"
	GET title="flight" -> flight id=flightID
end


resource passenger_pseudo_created
	item Passenger
	view { GETEntity }
	actions { CreateEntity }
	path "/Passengers()"
end
